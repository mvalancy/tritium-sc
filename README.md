```
████████╗██████╗ ██╗████████╗██╗██╗   ██╗███╗   ███╗      ███████╗ ██████╗
╚══██╔══╝██╔══██╗██║╚══██╔══╝██║██║   ██║████╗ ████║      ██╔════╝██╔════╝
   ██║   ██████╔╝██║   ██║   ██║██║   ██║██╔████╔██║█████╗███████╗██║
   ██║   ██╔══██╗██║   ██║   ██║██║   ██║██║╚██╔╝██║╚════╝╚════██║██║
   ██║   ██║  ██║██║   ██║   ██║╚██████╔╝██║ ╚═╝ ██║      ███████║╚██████╗
   ╚═╝   ╚═╝  ╚═╝╚═╝   ╚═╝   ╚═╝ ╚═════╝ ╚═╝     ╚═╝      ╚══════╝ ╚═════╝
```

<div align="center">

# **D E T E C T  •  M O N I T O R  •  E N G A G E**

**[ SECURITY CENTRAL - TACTICAL INTELLIGENCE PLATFORM ]**

`▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀`

*AI-powered threat detection • Autonomous asset control • Real-time tactical response*

[![Python 3.11+](https://img.shields.io/badge/python-3.11+-00f0ff?style=flat-square&logo=python&logoColor=white)](https://python.org)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.109+-ff2a6d?style=flat-square&logo=fastapi&logoColor=white)](https://fastapi.tiangolo.com)
[![YOLO](https://img.shields.io/badge/YOLO-v8-05ffa1?style=flat-square)](https://ultralytics.com)
[![License](https://img.shields.io/badge/license-MIT-fcee0a?style=flat-square)](LICENSE)

</div>

---

## ⚡ COMMAND & CONTROL

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│   ╔═══════════════════════════════════════════════════════════════════╗     │
│   ║                    T R I T I U M - S C                            ║     │
│   ║         SECURITY CENTRAL • TACTICAL INTELLIGENCE PLATFORM         ║     │
│   ╚═══════════════════════════════════════════════════════════════════╝     │
│                                                                             │
│   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌───────────┐    │
│   │   DETECT    │───▶│   TRACK     │───▶│  IDENTIFY   │───▶│  RESPOND  │    │
│   │  (YOLOv8)   │    │ (ByteTrack) │    │  (HUMAN)    │    │  (ASSET)  │    │
│   └─────────────┘    └─────────────┘    └─────────────┘    └───────────┘    │
│         │                  │                  │                  │          │
│         ▼                  ▼                  ▼                  ▼          │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                     INTELLIGENCE DATABASE                           │   │
│   │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────────────┐     │   │
│   │  │ CAMERAS  │  │  ZONES   │  │  ASSETS  │  │  TASK HISTORY    │     │   │
│   │  │ + FEEDS  │  │ + ALERTS │  │ + STATUS │  │  + TELEMETRY     │     │   │
│   │  └──────────┘  └──────────┘  └──────────┘  └──────────────────┘     │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 🎖️ OPERATIONAL CAPABILITIES

### THREAT DETECTION
```
┌──────────────────────────────────────────────────────────────┐
│  LIVE STREAM ──▶ MOTION ──▶ YOLO ──▶ BYTETRACK ──▶ ALERT     │
│                   │          │          │           │        │
│                   ▼          ▼          ▼           ▼        │
│               < 50ms     < 30ms     < 10ms      INSTANT      │
│                                                              │
│  TARGET CLASSES:                                             │
│  ├── 👤 PERSONNEL   (pedestrians, intruders, delivery)       │
│  ├── 🚗 VEHICLES    (cars, trucks, vans, motorcycles)        │
│  ├── 🚚 LOGISTICS   (UPS, FedEx, Amazon, USPS)               │
│  ├── 🚲 LIGHT VEH   (cyclists, scooters, drones)             │
│  └── 🐕 WILDLIFE    (dogs, cats, fauna)                      │
└──────────────────────────────────────────────────────────────┘
```

### ZONE MONITORING
```
╔══════════════════════════════════════════════════════════════╗
║  ZONE TYPES                                                  ║
╠══════════════════════════════════════════════════════════════╣
║                                                              ║
║  🔲 ACTIVITY       - Track all movement in area              ║
║  🚪 ENTRY/EXIT     - Monitor ingress/egress points           ║
║  📦 OBJECT WATCH   - Track state changes (dumpster, gate)    ║
║  ➖ TRIPWIRE       - Line-crossing detection                 ║
║                                                              ║
║  ALERT DELIVERY:                                             ║
║  ├── UI Notifications (real-time)                            ║
║  ├── Webhook (Discord, Slack, custom)                        ║
║  ├── MQTT (Home Assistant)                                   ║
║  └── Asset Tasking (automatic response)                      ║
║                                                              ║
╚══════════════════════════════════════════════════════════════╝
```

---

## 🤖 ASSET COMMAND SYSTEM

TRITIUM-SC enables autonomous response through **Asset Tasking**—command and control for ground/aerial operational units.

```
╔══════════════════════════════════════════════════════════════════════════╗
║                          ASSET CONTROL CENTER                            ║
╠══════════════════════════════════════════════════════════════════════════╣
║                                                                          ║
║   ASSET TYPES                        TASK TYPES                          ║
║   ═══════════                        ══════════                          ║
║   🚗 GROUND    Patrol vehicles       🔄 PATROL     Follow waypoints      ║
║   🚁 AERIAL    Observation drones    🎯 TRACK      Follow target         ║
║   📡 FIXED     Stationary sensors    ⚡ ENGAGE     Intercept target      ║
║                                      📍 LOITER     Hold position         ║
║   ASSET CLASSES                      🔍 INVESTIGATE  Scout location      ║
║   ═════════════                      🏠 RECALL     Return to base        ║
║   • Patrol      (perimeter)          🔋 REARM      Resupply/recharge     ║
║   • Interceptor (rapid response)                                         ║
║   • Observation (reconnaissance)     PRIORITY LEVELS                     ║
║   • Transport   (logistics)          ═══════════════                     ║
║                                      1 = CRITICAL (override all)         ║
║                                      5 = NORMAL (standard ops)           ║
║                                      10 = LOW (when available)           ║
║                                                                          ║
╚══════════════════════════════════════════════════════════════════════════╝
```

### TACTICAL WORKFLOW
```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│   1. DETECTION                 2. TASKING                               │
│   ┌─────────────┐              ┌─────────────┐                          │
│   │  INTRUDER   │─────────────▶│  DISPATCH   │                          │
│   │  DETECTED   │   auto or    │   UNIT-01   │                          │
│   │  Zone: N-3  │   manual     │  Task: TRACK│                          │
│   └─────────────┘              └─────────────┘                          │
│                                       │                                 │
│   3. EXECUTION                        ▼                                 │
│   ┌─────────────────────────────────────────────────────────┐           │
│   │                                                         │           │
│   │    UNIT-01 ────▶ ────▶ ────▶ [TARGET] ◀──── [CAM-02]    │           │
│   │        ↑                                                │           │
│   │    TELEMETRY: pos=(4.2, 7.1) heading=045° batt=87%      │           │
│   │                                                         │           │
│   └─────────────────────────────────────────────────────────┘           │
│                                       │                                 │
│   4. COMPLETION                       ▼                                 │
│   ┌─────────────┐              ┌─────────────┐                          │
│   │   TARGET    │◀─────────────│   RETURN    │                          │
│   │  LOGGED     │   report     │   TO BASE   │                          │
│   │  + FOOTAGE  │              │   RECHARGE  │                          │
│   └─────────────┘              └─────────────┘                          │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### ASSET API
```
ASSET MANAGEMENT
├── GET  /api/assets              List all registered assets
├── POST /api/assets              Register new asset
├── GET  /api/assets/{id}         Get asset status/details
├── PATCH /api/assets/{id}        Update asset properties
└── DELETE /api/assets/{id}       Remove asset from system

TASKING
├── POST /api/assets/{id}/task           Assign task
├── GET  /api/assets/{id}/tasks          List task history
├── POST /api/assets/{id}/task/{t}/start Start pending task
├── POST /api/assets/{id}/task/{t}/complete  Mark complete
└── POST /api/assets/{id}/task/{t}/cancel    Abort task

TELEMETRY & CONTROL
├── POST /api/assets/{id}/telemetry      Report position/status
├── GET  /api/assets/{id}/telemetry      Get position history
└── POST /api/assets/{id}/command        Send direct command
                                         (stop, return_home, emergency_stop)

QUICK ACTIONS
├── POST /api/assets/{id}/patrol   Start patrol with waypoints
├── POST /api/assets/{id}/recall   Return to home position
└── POST /api/assets/{id}/track    Track specific target
```

---

## 🌐 3D TACTICAL VIEW

```
                        ╔═══════════════════════════════════╗
                        ║   PROPERTY MAP - BIRD'S EYE VIEW  ║
                        ╚═══════════════════════════════════╝

                                    N
                                    ▲
                                    │
                    ┌───────────────┼───────────────┐
                    │               │               │
               ◄────┤    [CAM 1]    │    [CAM 2]    ├────►
              W     │       ◢       │       ◣       │     E
                    │        ╲     │     ╱          │
                    │     🚗  ╲    │    ╱   🚗      │
                    │   TARGET-01 ───────TARGET-02  │
                    │    ┌─────────────────┐        │
                    │    │                 │        │
                    │    │     HOUSE       │        │
                    │    │                 │        │
                    │    └─────────────────┘        │
                    │         ╱    │    ╲           │
                    │        ╱     │     ╲          │
                    │       ◥      │      ◤         │
                    │    [CAM 3]   │   [CAM 4]      │
                    │              │                │
                    └──────────────┼────────────────┘
                                   │
                                   ▼
                                   S

    ◢◣◤◥ = Camera field of view
    [  ] = Camera position (draggable)
    🚗  = Target & Asset position (real-time)
    ──▶ = Asset movement path
```

**Features:**
- 📍 Drag cameras to match real-world positions
- 👁️ View cones show camera coverage
- 🖼️ Live preview thumbnails on each camera
- 🚗 Real-time target & asset positions and headings
- 📡 Telemetry overlays (battery, speed, status)
- 💾 Positions persist across sessions

---

## 🎯 TARGET GALLERY

```
╔══════════════════════════════════════════════════════════════════════════╗
║                         TARGETS - PERSONNEL                              ║
╠══════════════════════════════════════════════════════════════════════════╣
║                                                                          ║
║  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐         ║
║  │  👤     │  │  👤     │  │  👤     │  │  👤     │  │  👤     │         ║
║  │         │  │         │  │ "Bob"   │  │         │  │         │         ║
║  │ CH01    │  │ CH01    │  │ CH02    │  │ CH03    │  │ CH02    │         ║
║  │ 94%     │  │ 87%     │  │ 92%     │  │ 78%     │  │ 91%     │         ║
║  │ 14:32   │  │ 14:45   │  │ 15:02   │  │ 15:15   │  │ 15:28   │         ║
║  └─────────┘  └─────────┘  └─────────┘  └─────────┘  └─────────┘         ║
║                                                                          ║
║  [LABEL]  [FIND SIMILAR]  [DISPATCH ASSET]  [VIEW IN PLAYER]             ║
║                                                                          ║
╚══════════════════════════════════════════════════════════════════════════╝

ACTIONS:
• LABEL      - Name this individual ("mailman", "neighbor")
• SIMILAR    - Find other appearances of this person
• DISPATCH   - Task an asset to track/investigate this target
• VIEW       - Jump to video footage at detection timestamp
```

---

## 🧠 HUMAN-IN-THE-LOOP LEARNING

TRITIUM-SC learns from operator feedback to improve detection accuracy.

```
┌─────────────────────────────────────────────────────────────────────┐
│                     CONSOLIDATION INTERFACE                         │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│   DETECTED TARGETS (24 thumbnails)                                  │
│   ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐                   │
│   │ 🚗  │ │ 🚗  │ │ 🚗  │ │ 🚙  │ │ 🚗  │ │ 🚗  │                  │
│   │ #1  │ │ #2  │ │ #3  │ │ #4  │ │ #5  │ │ #6  │                   │
│   └──┬──┘ └──┬──┘ └──┬──┘ └─────┘ └──┬──┘ └──┬──┘                   │
│      │       │       │               │       │                      │
│      └───────┴───────┴───────────────┴───────┘                      │
│                      │                                              │
│                      ▼                                              │
│              ┌──────────────┐                                       │
│              │  SAME CAR    │  ◀── OPERATOR MERGE                   │
│              │  "My Honda"  │  ◀── OPERATOR LABEL                   │
│              └──────────────┘                                       │
│                      │                                              │
│                      ▼                                              │
│   ┌─────────────────────────────────────────────────────────────┐   │
│   │  FEEDBACK LOGGED FOR REINFORCEMENT LEARNING                 │   │
│   │  ├── merge_action: [#1, #2, #3, #5, #6] → "my_honda"        │   │
│   │  ├── visual_similarity: 0.94                                │   │
│   │  └── timestamp: 2026-01-25T18:42:07Z                        │   │
│   └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

| Action | Purpose | Future Use |
|--------|---------|------------|
| **MERGE** | "These are the same vehicle" | Train ReID embeddings |
| **LABEL** | "This is the mailman" | Named entity recognition |
| **CORRECT** | "This is a truck, not a car" | Fine-tune detector |
| **REJECT** | "This is a false positive" | Improve confidence thresholds |

---

## 🔧 DEPLOYMENT

```bash
# Clone the repository
git clone git@github.com:mvalancy/tritium-sc.git
cd tritium-sc

# Run setup
./setup.sh install    # Create venv + install dependencies
./setup.sh ml         # Install PyTorch + YOLO (downloads models)

# Configure environment
cp .env.example .env
# Edit .env with your NVR credentials

# Launch
./setup.sh dev        # Development mode with auto-reload
# or
./setup.sh prod       # Production mode
```

**Access the dashboard:** http://localhost:8000

---

## 🎮 CONTROLS & INPUT

TRITIUM-SC supports full keyboard and gamepad navigation for hands-free operation.

### Quick Reference

| Action | Keyboard | Gamepad |
|--------|----------|---------|
| Navigate | Arrow keys | D-Pad / Left Stick |
| Select | Enter | A Button |
| Back | ESC | B Button |
| Help | ? | SELECT |
| Switch View | G/P/D/Z/T/A/N | LB/RB |

### Keyboard Shortcuts

| Key | View |
|-----|------|
| `G` | Grid |
| `P` | Player |
| `D` | 3D Property |
| `Z` | Zones |
| `T` | Targets |
| `A` | Assets |
| `N` | Analytics |
| `?` | Controls Help |
| `/` | Focus Search |

### Gamepad Support

Connect any Xbox, 8BitDo (xinput mode), or standard controller:

- **D-Pad**: Navigate between elements
- **A**: Confirm / Select
- **B**: Back / Cancel
- **X**: Context menu
- **Y**: Secondary action
- **LB/RB**: Previous/Next view
- **SELECT**: Show controls overlay

**Full documentation:** See [docs/CONTROLS.md](docs/CONTROLS.md) and [docs/GAMEPAD.md](docs/GAMEPAD.md)

---

## 📡 COMPLETE API REFERENCE

```
┌────────────────────────────────────────────────────────────────────┐
│  TRITIUM-SC API v0.1.0                                             │
├────────────────────────────────────────────────────────────────────┤
│                                                                    │
│  CAMERAS                                                           │
│  ├── GET  /api/cameras              List all cameras               │
│  ├── GET  /api/cameras/{id}         Get camera details             │
│  └── GET  /api/discovery/scan       Discover NVR cameras           │
│                                                                    │
│  VIDEOS                                                            │
│  ├── GET  /api/videos/channels      List channels with recordings  │
│  ├── GET  /api/videos/{ch}/dates    List dates for channel         │
│  ├── GET  /api/videos/{ch}/{date}   List videos for date           │
│  ├── GET  /api/videos/stream/...    Stream video file              │
│  └── GET  /api/videos/thumbnail/... Get video thumbnail            │
│                                                                    │
│  AI ANALYSIS                                                       │
│  ├── POST /api/ai/analyze           Start day analysis             │
│  ├── GET  /api/ai/analyze/{id}      Check analysis status          │
│  ├── GET  /api/ai/timeline/{ch}/{d} Get analyzed timeline          │
│  └── GET  /api/ai/status            AI module status               │
│                                                                    │
│  SEARCH & INTELLIGENCE                                             │
│  ├── GET  /api/search/people        List detected people           │
│  ├── GET  /api/search/vehicles      List detected vehicles         │
│  ├── GET  /api/search/thumbnail/{id} Get detection thumbnail       │
│  ├── GET  /api/search/similar/{id}  Find similar objects           │
│  ├── POST /api/search/merge         Merge duplicate detections     │
│  ├── POST /api/search/label         Label an object                │
│  └── POST /api/search/feedback      Submit correction feedback     │
│                                                                    │
│  ZONES                                                             │
│  ├── GET  /api/zones                List all zones                 │
│  ├── POST /api/zones                Create zone                    │
│  ├── GET  /api/zones/{id}           Get zone details               │
│  ├── GET  /api/zones/{id}/events    Get zone events                │
│  └── DELETE /api/zones/{id}         Delete zone                    │
│                                                                    │
│  ASSETS (NEW)                                                      │
│  ├── GET  /api/assets               List operational assets        │
│  ├── POST /api/assets               Register new asset             │
│  ├── POST /api/assets/{id}/task     Assign task to asset           │
│  ├── POST /api/assets/{id}/telemetry  Update asset telemetry       │
│  ├── POST /api/assets/{id}/command  Send direct command            │
│  └── POST /api/assets/{id}/recall   Quick recall to base           │
│                                                                    │
│  WEBSOCKET                                                         │
│  └── WS   /ws/live                  Real-time events & alerts      │
│                                                                    │
└────────────────────────────────────────────────────────────────────┘
```

---

## 🏗️ SYSTEM ARCHITECTURE

```
tritium-sc/
├── app/
│   ├── ai/
│   │   ├── detector.py      # YOLO object detection
│   │   ├── tracker.py       # ByteTrack integration
│   │   ├── analyzer.py      # Video analysis pipeline
│   │   └── embeddings.py    # Visual similarity (CLIP)
│   ├── routers/
│   │   ├── cameras.py       # Camera CRUD
│   │   ├── videos.py        # Video browsing & streaming
│   │   ├── ai.py            # Analysis endpoints
│   │   ├── search.py        # Search & labeling
│   │   ├── zones.py         # Zone management
│   │   ├── assets.py        # Asset control (NEW)
│   │   └── discovery.py     # NVR auto-discovery
│   ├── zones/
│   │   ├── manager.py       # Zone CRUD & events
│   │   └── geometry.py      # Point-in-polygon
│   ├── discovery/
│   │   └── nvr.py           # Reolink NVR API client
│   ├── main.py              # FastAPI application
│   ├── config.py            # Pydantic settings
│   ├── database.py          # Async SQLite + FTS5
│   └── models.py            # SQLAlchemy models
├── frontend/
│   ├── index.html           # Main SPA
│   ├── css/
│   │   ├── cybercore.css    # Cyberpunk effects
│   │   └── tritium.css      # Custom styles
│   └── js/
│       ├── app.js           # Main application
│       ├── grid.js          # Three.js 3D view
│       ├── player.js        # Video player
│       ├── zones.js         # Zone management
│       ├── targets.js       # People/vehicle gallery
│       └── assets.js        # Asset control (NEW)
└── tests/
```

---

## 🎨 TECH STACK

```
╔══════════════════════════════════════════════════════════════════╗
║                                                                  ║
║   BACKEND                          FRONTEND                      ║
║   ════════                         ════════                      ║
║   ▪ Python 3.11+                   ▪ Vanilla JS (no framework)   ║
║   ▪ FastAPI                        ▪ Three.js (3D rendering)     ║
║   ▪ SQLAlchemy + aiosqlite         ▪ CYBERCORE CSS               ║
║   ▪ Pydantic                       ▪ JetBrains Mono font         ║
║                                                                  ║
║   AI/ML                            INTEGRATIONS                  ║
║   ═════                            ════════════                  ║
║   ▪ Ultralytics YOLOv8             ▪ Reolink NVR API             ║
║   ▪ ByteTrack (multi-object)       ▪ RTSP streams                ║
║   ▪ OpenCV                         ▪ MQTT (planned)              ║
║   ▪ PyTorch + CUDA                 ▪ Home Assistant (planned)    ║
║                                                                  ║
╚══════════════════════════════════════════════════════════════════╝
```

---

## 🚀 ROADMAP

```
PHASE 1 ████████████████████ COMPLETE
├── Cyberpunk UI shell
├── Video browsing by channel/date
├── YOLO object detection
├── ByteTrack unique counting
└── Thumbnail extraction

PHASE 2 ████████████████░░░░ NEARLY COMPLETE
├── Person/vehicle target gallery
├── Manual merge & labeling
├── Zone monitoring & alerts
├── 3D property visualization
└── Asset management system

PHASE 3 ░░░░░░░░░░░░░░░░░░░░ IN PROGRESS
├── Live RTSP stream analysis
├── Real-time WebSocket alerts
├── Asset telemetry integration
└── Automated asset response

PHASE 4 ░░░░░░░░░░░░░░░░░░░░ PLANNED
├── ReID model training from feedback
├── Cross-camera tracking
├── Multi-asset coordination
├── Natural language search
└── MQTT/Home Assistant integration
```

---

## 📜 LICENSE

MIT License - See [LICENSE](LICENSE) for details.

---

<div align="center">

```
╔════════════════════════════════════════════════════════════════╗
║                                                                ║
║              "VIGILANCE THROUGH INTELLIGENCE"                  ║
║                                                                ║
║         DETECT threats before they become incidents            ║
║         MONITOR your domain with AI-enhanced vision            ║
║         ENGAGE with autonomous tactical response               ║
║                                                                ║
╚════════════════════════════════════════════════════════════════╝
```

**Built with 🔋 TRITIUM power**

*Advanced perimeter security for the modern operator.*

*No cloud. No subscriptions. Full control.*

</div>
